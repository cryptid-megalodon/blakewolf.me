!function(a){"use strict";var e=a("body").attr("data-page-url"),t=document.title,i=window.History,l=a(".page__content").attr("data-image");function n(){a(".header-image").imagesLoaded({background:!0},(function(){a("body").removeClass("loading"),a("body").removeClass("menu--open")})),a(".active-link").removeClass("active-link"),a('a[href="'+e+'"]').addClass("active-link"),Waypoint.destroyAll();var t=0;a(".gallery").each((function(){var e=a(this),i="gallery-"+ ++t;e.attr("id",i);var l=e.attr("data-columns");e.append('<div class="gallery__wrap"></div>'),e.children("img").each((function(){a(this).appendTo("#"+i+" .gallery__wrap")})),e.find(".gallery__wrap img").each((function(){var e=a(this).attr("src");a(this).wrapAll('<div class="gallery__item"><a href="'+e+'" class="gallery__item__link"></div></div>').appendTo()})),e.imagesLoaded((function(){if("1"===l){e.addClass("gallery--carousel"),e.children(".gallery__wrap").addClass("owl-carousel"),e.children(".gallery__wrap").owlCarousel({items:1,loop:!0,mouseDrag:!1,touchDrag:!0,pullDrag:!1,dots:!0,autoplay:!1,autoplayTimeout:6e3,autoHeight:!0,animateOut:"fadeOut"});new Waypoint({element:document.getElementById(i),handler:function(a){"down"===a&&e.children(".gallery__wrap").trigger("stop.owl.autoplay"),"up"===a&&e.children(".gallery__wrap").trigger("play.owl.autoplay")},offset:"-100%"}),new Waypoint({element:document.getElementById(i),handler:function(a){"down"===a&&e.children(".gallery__wrap").trigger("play.owl.autoplay"),"up"===a&&e.children(".gallery__wrap").trigger("stop.owl.autoplay")},offset:"100%"})}else e.addClass("gallery--grid"),e.children(".gallery__wrap").masonry({itemSelector:".gallery__item",transitionDuration:0}),e.find(".gallery__item__link").fluidbox({loader:!0});e.addClass("gallery--on")}))})),a(".single p > img").each((function(){var e=a(this).parent("p");a(this).insertAfter(e),a(this).wrapAll('<div class="image-wrap"></div>'),e.remove()})),a(".single iframe").each((function(){if(a(this).attr("src").indexOf("youtube")>=0||a(this).attr("src").indexOf("vimeo")>=0){var e=a(this).attr("width"),t=a(this).attr("height")/e*100;a(this).wrapAll('<div class="video-wrap"><div class="video" style="padding-bottom:'+t+'%;"></div></div>')}})),a(".single table").each((function(){a(this).wrapAll('<div class="table-wrap"></div>')}))}i.Adapter.bind(window,"statechange",(function(){var o=i.getState();a("body").addClass("loading"),a(".page-loader").load(o.hash+" .page__content",(function(){setTimeout((function(){a("body, html").animate({scrollTop:0},0),a(".page .page__content").remove(),a(".page-loader .page__content").appendTo(".page"),a("body").attr("data-page-url",window.location.pathname),e=a("body").attr("data-page-url"),t=a(".page__content").attr("data-page-title"),document.title=t;var i=a(".page__content").attr("data-image");n(),i!==l&&(l=i,a(".header-image:not(.header-image--on)").css("background-image","url("+l+")"),a(".header-image:not(.header-image--on)").addClass("header-image--switch"),a(".header-image--switch").imagesLoaded({background:!0},(function(){a(".header-image--on").removeClass("header-image--on"),a(".header-image--switch").addClass("header-image--on"),a(".header-image--switch").removeClass("header-image--switch")})))}),400)}))})),a("body").hasClass("ajax-loading")&&a(document).on("click","a",(function(l){l.preventDefault();var n=a(this).attr("href");a(this).hasClass("js-no-ajax")||n.indexOf("#")>=0||n.indexOf("mailto:")>=0||n.indexOf("tel:")>=0?window.location=n:a(this).is(".gallery__item__link")||(n.indexOf("http")>=0?window.open(n,"_blank"):(e=n,i.pushState(null,t,n)))})),n(),a(document).on("click",".js-menu-toggle",(function(){a("body").hasClass("menu--open")?a("body").removeClass("menu--open"):a("body").addClass("menu--open")})),a(document).on("click",".menu__list__item__link",(function(){a(".menu").hasClass("menu--open")&&a(".menu").removeClass("menu--open")}))}(jQuery);